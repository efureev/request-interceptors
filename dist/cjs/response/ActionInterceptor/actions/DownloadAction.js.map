{"version":3,"file":"DownloadAction.js","names":["DownloadAction","data","interceptorConfig","requestExtra","url","name","configLayer","response","link","document","createElement","href","download","body","append","click","remove","BaseAction"],"sources":["../../../../../src/response/ActionInterceptor/actions/DownloadAction.ts"],"sourcesContent":["import type { RawDataType } from './BaseAction'\nimport BaseAction from './BaseAction'\nimport type { ActionInterceptorConfig } from '../ActionInterceptor'\nimport type { LayerConfig } from '@feugene/layer-request'\nimport type { AxiosResponse } from 'axios'\nimport type ResponseWrapper from '../../WrapperInterceptor/ResponseWrapper'\nimport { ExtraProperties } from '@feugene/layer-request'\n\ninterface DownloadRawDataType extends RawDataType {\n  url: string\n  name?: string\n}\n\nexport default class DownloadAction extends BaseAction {\n  private readonly url: string\n  private readonly name?: string\n\n  constructor(data: RawDataType, interceptorConfig: ActionInterceptorConfig, requestExtra: ExtraProperties) {\n    super(data, interceptorConfig, requestExtra)\n\n    this.url = data.url\n    this.name = data.name\n  }\n\n  protected handle(configLayer: LayerConfig, response: AxiosResponse | ResponseWrapper): false | void {\n    const link = document.createElement('a')\n\n    link.href = this.url\n    if (this.name) {\n      link.download = this.name\n    }\n\n    document.body.append(link)\n    link.click()\n    link.remove()\n  }\n}\n"],"mappings":";;;;;;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;IAYqBA,c;;;;;EAInB,wBAAYC,IAAZ,EAA+BC,iBAA/B,EAA2EC,YAA3E,EAA0G;IAAA;;IAAA;;IACxG,0BAAMF,IAAN,EAAYC,iBAAZ,EAA+BC,YAA/B;IAEA,MAAKC,GAAL,GAAWH,IAAI,CAACG,GAAhB;IACA,MAAKC,IAAL,GAAYJ,IAAI,CAACI,IAAjB;IAJwG;EAKzG;;;;WAED,gBAAiBC,WAAjB,EAA2CC,QAA3C,EAAoG;MAClG,IAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;MAEAF,IAAI,CAACG,IAAL,GAAY,KAAKP,GAAjB;;MACA,IAAI,KAAKC,IAAT,EAAe;QACbG,IAAI,CAACI,QAAL,GAAgB,KAAKP,IAArB;MACD;;MAEDI,QAAQ,CAACI,IAAT,CAAcC,MAAd,CAAqBN,IAArB;MACAA,IAAI,CAACO,KAAL;MACAP,IAAI,CAACQ,MAAL;IACD;;;;EAtByCC,oB"}