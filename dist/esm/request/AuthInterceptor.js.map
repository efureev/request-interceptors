{"version":3,"file":"AuthInterceptor.js","names":["isFunction","AuthInterceptor","layerConfig","extra","config","auth","getExtra","headers","Authorization"],"sources":["../../../src/request/AuthInterceptor.ts"],"sourcesContent":["import { isFunction } from '@feugene/mu'\nimport type { ExtraProperties, InterceptorSuccessParam, LayerConfig } from '@feugene/layer-request'\nimport type { AxiosRequestConfig, AxiosRequestHeaders } from 'axios'\n\nconst AuthInterceptor =\n  (layerConfig: LayerConfig, extra: ExtraProperties): InterceptorSuccessParam<AxiosRequestConfig> =>\n    (config: AxiosRequestConfig): AxiosRequestConfig => {\n      const auth = layerConfig.getExtra('auth')\n      if (auth) {\n        ;(<AxiosRequestHeaders>config.headers).Authorization = isFunction(auth) ? auth(config) : config.auth\n      }\n      else {\n        config.headers && delete config.headers.Authorization\n      }\n\n      return config\n    }\n\nexport default AuthInterceptor\n"],"mappings":"AAAA,SAASA,UAAT,QAA2B,aAA3B;;AAIA,MAAMC,eAAe,GACnB,CAACC,WAAD,EAA2BC,KAA3B,KACGC,MAAD,IAAoD;EAClD,MAAMC,IAAI,GAAGH,WAAW,CAACI,QAAZ,CAAqB,MAArB,CAAb;;EACA,IAAID,IAAJ,EAAU;IACR;IAAuBD,MAAM,CAACG,OAA7B,CAAsCC,aAAtC,GAAsDR,UAAU,CAACK,IAAD,CAAV,GAAmBA,IAAI,CAACD,MAAD,CAAvB,GAAkCA,MAAM,CAACC,IAA/F;EACF,CAFD,MAGK;IACHD,MAAM,CAACG,OAAP,IAAkB,OAAOH,MAAM,CAACG,OAAP,CAAeC,aAAxC;EACD;;EAED,OAAOJ,MAAP;AACD,CAZL;;AAcA,eAAeH,eAAf"}