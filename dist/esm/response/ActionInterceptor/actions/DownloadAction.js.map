{"version":3,"file":"DownloadAction.js","names":["BaseAction","DownloadAction","constructor","data","interceptorConfig","requestExtra","url","name","handle","configLayer","response","link","document","createElement","href","download","body","append","click","remove"],"sources":["../../../../../src/response/ActionInterceptor/actions/DownloadAction.ts"],"sourcesContent":["import type { RawDataType } from './BaseAction'\nimport BaseAction from './BaseAction'\nimport type { ActionInterceptorConfig } from '../ActionInterceptor'\nimport type { LayerConfig } from '@feugene/layer-request'\nimport type { AxiosResponse } from 'axios'\nimport type ResponseWrapper from '../../WrapperInterceptor/ResponseWrapper'\nimport { ExtraProperties } from '@feugene/layer-request'\n\ninterface DownloadRawDataType extends RawDataType {\n  url: string\n  name?: string\n}\n\nexport default class DownloadAction extends BaseAction {\n  private readonly url: string\n  private readonly name?: string\n\n  constructor(data: RawDataType, interceptorConfig: ActionInterceptorConfig, requestExtra: ExtraProperties) {\n    super(data, interceptorConfig, requestExtra)\n\n    this.url = data.url\n    this.name = data.name\n  }\n\n  protected handle(configLayer: LayerConfig, response: AxiosResponse | ResponseWrapper): false | void {\n    const link = document.createElement('a')\n\n    link.href = this.url\n    if (this.name) {\n      link.download = this.name\n    }\n\n    document.body.append(link)\n    link.click()\n    link.remove()\n  }\n}\n"],"mappings":"AACA,OAAOA,UAAP,MAAuB,cAAvB;AAYA,eAAe,MAAMC,cAAN,SAA6BD,UAA7B,CAAwC;EAIrDE,WAAW,CAACC,IAAD,EAAoBC,iBAApB,EAAgEC,YAAhE,EAA+F;IACxG,MAAMF,IAAN,EAAYC,iBAAZ,EAA+BC,YAA/B;IAEA,KAAKC,GAAL,GAAWH,IAAI,CAACG,GAAhB;IACA,KAAKC,IAAL,GAAYJ,IAAI,CAACI,IAAjB;EACD;;EAESC,MAAM,CAACC,WAAD,EAA2BC,QAA3B,EAAoF;IAClG,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;IAEAF,IAAI,CAACG,IAAL,GAAY,KAAKR,GAAjB;;IACA,IAAI,KAAKC,IAAT,EAAe;MACbI,IAAI,CAACI,QAAL,GAAgB,KAAKR,IAArB;IACD;;IAEDK,QAAQ,CAACI,IAAT,CAAcC,MAAd,CAAqBN,IAArB;IACAA,IAAI,CAACO,KAAL;IACAP,IAAI,CAACQ,MAAL;EACD;;AAtBoD"}